Este es el código para la versión generica
